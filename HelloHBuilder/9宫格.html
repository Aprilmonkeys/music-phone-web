<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#box {
				width: 50px;
				height: 50px;
				background-color: #3385FF;
				position: absolute;
				top: 0;
				left:0;
			}
			img {
				width: 150px;
				height: 150px;
				position: absolute;
				top: 100px;
				left: 200px;
			}
			
		</style>
	</head>
	<body>
		<img src="img/1.png" alt="" />
		<div id="box">
			盒子
		</div>
		<script>
			//拖动盒子 盒子的位置 鼠标的位置 盒子的偏移量
			
			var box=document.getElementById('box');
			var img=document.querySelector('img');
			//鼠标拖动盒子的流程
			box.onmousedown=function(event){
				//获取盒子距离父元素的初始位置
				var boxL=box.offsetLeft;
				var boxT=box.offsetTop;
				//鼠标的初始位置
				var mouseL=event.clientX;
				var mouseT=event.clientY;
				document.onmousemove=function(event){
					//鼠标结束位置
					var leftEnd=event.clientX;
					var topEnd=event.clientY;
					//盒子移动的偏移量
					var left=leftEnd-mouseL+boxL;
					var top=topEnd-mouseT+boxT;
					box.style.left=left+'px';
					box.style.top=top+'px';
					
				//判断盒子的上下左右位置 用新方法 getBoundingClientRect() 到左上角的距离	
			var boxTop = box.getBoundingClientRect().top;
			var boxLeft =box.getBoundingClientRect().left;
			var boxRight =box.getBoundingClientRect().right;
			var boxBottom =box.getBoundingClientRect().bottom;
			//图片的位置
			var imgTop =img.getBoundingClientRect().top;
			var imgLeft =img.getBoundingClientRect().left;
			var imgRight =img.getBoundingClientRect().right;
			var imgBottom =img.getBoundingClientRect().bottom;
			
			if(boxTop>imgBottom || boxLeft>imgRight || boxRight<imgLeft || boxBottom<imgTop){
				//正常情况下
				img.src='img/1.png';
			}else{
				img.src='img/2.png';
			}
				}
				document.onmouseup=function(event){
					document.onmousemove=null;
					document.onmouseup=null;
				}
				return false;
			}
			//拖动盒子 盒子的右边和图片的边进行判断
			
			
		
			
		</script>
	</body>
</html>
